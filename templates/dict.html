<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dict test</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/dictstyle.css') }}">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
</head>
<body>
    <div class="header">
        <img id="logo" src="{{ url_for('static', filename='logo.png') }}">
        <h1>OTUG Mining dictionary</h1>
    </div>
    <div class="wrapper">
        <div class="words">
            <input type="text" id="search" placeholder="search .. ">
            <button id="goBtn" onclick="search()">Go</button>

            <ul id="word_list">
                
            </ul>
        </div>
        <div class="word">
            <h3 id="word_text"></h3>
            <p id="definition"></p>

            <hr>

            <h3>Related words:</h3>
            <li id="related"></li>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    dictionary = {{dictionary}}
    
    document.getElementById("search").addEventListener("keyup", function(event) {
        event.preventDefault();
        if (event.keyCode === 13) {
            document.getElementById("goBtn").click();
        }
    }); 
    start = function (){
        for (var i = 0; i < dictionary.length; i++) {
            document.getElementById('word_list').innerHTML += "<li onclick = 'show (" + i + ")'>" + dictionary[i].word + "</li>";
        }
    }

    start();
    show = function(i) {
        document.getElementById('word_text').innerHTML = dictionary[i].word;
        document.getElementById('definition').innerHTML = dictionary[i].definition;

        var list = "";
        for (var j = 0; j < dictionary[i].rel.length; j++){
            list += "<li>" + dictionary[i].rel[j] + "</li>";
            document.getElementById('related').innerHTML = list; 
        }
    };

    show(0);

    search = function(){

        query = document.getElementById('search').value.trim();
        var querychanged = query.charAt(0).toUpperCase() + query.slice(1);

    if (querychanged == "") {

        return;
    }

        found = -1;
        for (var i = 0; i < dictionary.length; i++) {
            if (querychanged == dictionary[i].word) {
            found = i;
            break;
    }else {
        document.getElementById('word_text').innerHTML = "Word not found"; 
        document.getElementById('definition').innerHTML = "The word you entered is not in here";
        document.getElementById('related').innerHTML = "No related words"
     }
    }

    if (found >= 0) {
        show(found);
     }
    }

</script>